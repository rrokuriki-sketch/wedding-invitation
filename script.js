// =========================== // Google Form Configuration // =========================== const GOOGLE_FORM_CONFIG = { // フォームのAction URL formActionUrl: 'https://docs.google.com/forms/d/e/1FAIpQLScXMIIKCc7n-oQCM5m-4D0bFX4xjoECj7xmQaubg9KjJ9bdPA/formResponse', // 各項目のEntry ID entryIds: { name: 'entry.559352220', // お名前 reception: 'entry.877086558', // 披露宴（出欠） party: 'entry.816037791', // 二次会（出欠） allergy: 'entry.1597978308', // アレルギー address: 'entry.998262904' // お住まい（住所） } }; // =========================== // Particle Effects System (Sakura Theme) // =========================== class ParticleSystem { constructor() { this.container = document.getElementById('particles'); if (!this.container) return; this.initParticles(); } initParticles() { this.container.innerHTML = ''; const particleCount = 25; for (let i = 0; i < particleCount; i++) { this.createParticle(); } } createParticle() { const particle = document.createElement('div'); particle.style.position = 'absolute'; // Size: varied const size = Math.random() * 8 + 4 + 'px'; particle.style.width = size; particle.style.height = size; // Shape: Petal or Dot if (Math.random() > 0.4) { particle.style.borderRadius = '50% 0 50% 0'; // Petal particle.style.transform = "rotate(" + (Math.random() * 360) + "deg)"; } else { particle.style.borderRadius = '50%'; } // Position particle.style.left = Math.random() * 100 + '%'; particle.style.top = Math.random() * -20 + '%'; // Start above viewport // Color: Gold or Sakura if (Math.random() > 0.5) { particle.style.background = '#e6d370'; // Gold particle.style.opacity = Math.random() * 0.4 + 0.1; } else { particle.style.background = '#fddde6'; // Sakura Pink particle.style.opacity = Math.random() * 0.5 + 0.2; } // Animation const duration = Math.random() * 10 + 10 + 's'; const delay = Math.random() * 15 + 's'; particle.style.animation = "sakuraFall " + duration + " linear " + delay + " infinite"; this.container.appendChild(particle); } } // =========================== // Smooth Scroll Navigation & Cinematic FX // =========================== document.addEventListener('DOMContentLoaded', () => { // Initialize Particles new ParticleSystem(); // Hero Image Carousel - Auto slideshow every 6 seconds const slides = document.querySelectorAll('.hero-slide'); let currentSlide = 0; function showNextSlide() { const prevSlideIndex = currentSlide; currentSlide = (currentSlide + 1) % slides.length; // Transition logic for smooth Ken Burns // 1. Mark previous slide to keep zoom level slides[prevSlideIndex].classList.add('previous'); slides[prevSlideIndex].classList.remove('active'); // 2. Activate new slide (starts zooming in) slides[currentSlide].classList.add('active'); // 3. Remove 'previous' class after fade out to reset zoom for next time // Wait slightly longer than CSS opacity transition (2s) setTimeout(() => { slides[prevSlideIndex].classList.remove('previous'); }, 2200); } // Start slideshow if slides exist if (slides.length > 0) { setInterval(showNextSlide, 6000); // Change slide every 6 seconds } // Navigation link smooth scroll const navLinks = document.querySelectorAll('.nav-link'); navLinks.forEach(link => { link.addEventListener('click', (e) => { e.preventDefault(); const targetId = link.getAttribute('href'); const targetSection = document.querySelector(targetId); if (targetSection) { targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' }); } }); }); // Header background on scroll const header = document.getElementById('header'); window.addEventListener('scroll', () => { if (window.scrollY > 100) { header.classList.add('scrolled'); } else { header.classList.remove('scrolled'); } }); // Intersection Observer for Cinematic Reveals const observerOptions = { threshold: 0.15, rootMargin: '0px 0px -50px 0px' }; const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); // Optional: Stop observing once visible to save performance // observer.unobserve(entry.target); } }); }, observerOptions); // Observe text elements const revealElements = document.querySelectorAll('.section-title, .section-subtitle, .message-text, .couple-card, .info-card, .rsvp-intro, .form-group'); revealElements.forEach((el, index) => { el.classList.add('reveal-text'); // Add delay based on index within container for stagger effect observer.observe(el); }); }); // =========================== // RSVP Form Submission // =========================== document.addEventListener('DOMContentLoaded', () => { const rsvpForm = document.getElementById('rsvpForm'); const thankYouMessage = document.getElementById('thankYou'); if (rsvpForm) { rsvpForm.addEventListener('submit', async (e) => { e.preventDefault(); // Get form data const formData = new FormData(rsvpForm); const name = formData.get('name'); const reception = formData.get('reception'); const party = formData.get('party'); const allergy = formData.get('allergy') || ''; const address = formData.get('address') || ''; // Validate required fields if (!name || !reception || !party) { alert('お名前と出欠のご回答は必須項目です。'); return; } // Prepare data for Google Form const googleFormData = new FormData(); googleFormData.append(GOOGLE_FORM_CONFIG.entryIds.name, name); googleFormData.append(GOOGLE_FORM_CONFIG.entryIds.reception, reception); googleFormData.append(GOOGLE_FORM_CONFIG.entryIds.party, party); googleFormData.append(GOOGLE_FORM_CONFIG.entryIds.allergy, allergy); googleFormData.append(GOOGLE_FORM_CONFIG.entryIds.address, address); try { // Submit to Google Form await fetch(GOOGLE_FORM_CONFIG.formActionUrl, { method: 'POST', body: googleFormData, mode: 'no-cors' }); // Hide form and show thank you message rsvpForm.style.display = 'none'; thankYouMessage.style.display = 'block'; // Scroll to thank you message thankYouMessage.scrollIntoView({ behavior: 'smooth', block: 'center' }); } catch (error) { console.error('Error submitting form:', error); alert('送信中にエラーが発生しました。しばらくしてから再度お試しください。'); } }); } });
 // minor change
